# Handwritten OCR System v5 with o3 Model

å»ºç¯‰å›³é¢PDFã‹ã‚‰æ‰‹æ›¸ãã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ½å‡ºãƒ»åˆ†æã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚OpenAI GPT-4o (o3) ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã€æ‰‹æ›¸ãã®ã‚³ãƒ¡ãƒ³ãƒˆã‚„ãƒ¡ãƒ¢ã‚’è­˜åˆ¥ã—ã€ãã®ä½ç½®ã€å†…å®¹ã€æ–‡è„ˆã‚’è§£æã—ã¾ã™ã€‚

## æ©Ÿèƒ½

- ğŸ“„ PDFãƒ•ã‚¡ã‚¤ãƒ«ã®å„ãƒšãƒ¼ã‚¸ã‚’ç”»åƒã«å¤‰æ›
- ğŸ” GPT-4o ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹æ‰‹æ›¸ãã‚³ãƒ¡ãƒ³ãƒˆã®æ¤œå‡º
- ğŸ“ ã‚³ãƒ¡ãƒ³ãƒˆã®ä½ç½®æƒ…å ±ï¼ˆãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹ï¼‰ã®å–å¾—
- ğŸ—ï¸ å»ºç¯‰å›³é¢ã®è¦ç´ ã¨ã®é–¢é€£ä»˜ã‘
- ğŸ“Š çµæœã‚’ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ã§è¡¨ç¤º
- ğŸ’¾ CSV/JSONå½¢å¼ã§ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pnpm install
```

### 2. OpenAI APIã‚­ãƒ¼ã®è¨­å®š

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€APIã‚­ãƒ¼ã‚’è¨­å®šï¼š

```bash
OPENAI_API_KEY=your-api-key-here
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```bash
# PDFãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†æ
pnpm analyze <pdf-file>

# ä¾‹ï¼š
pnpm analyze "çŸ³é»’ãƒ¡ãƒ¢.pdf"
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³

```bash
# CSVå½¢å¼ã§å‡ºåŠ›
pnpm analyze "çŸ³é»’ãƒ¡ãƒ¢.pdf" -o results.csv

# JSONå½¢å¼ã§å‡ºåŠ›
pnpm analyze "çŸ³é»’ãƒ¡ãƒ¢.pdf" -j results.json

# ä¸¡æ–¹ã®å½¢å¼ã§å‡ºåŠ›
pnpm analyze "çŸ³é»’ãƒ¡ãƒ¢.pdf" -o results.csv -j results.json

# APIã‚­ãƒ¼ã‚’ç›´æ¥æŒ‡å®š
pnpm analyze "çŸ³é»’ãƒ¡ãƒ¢.pdf" --api-key sk-xxx
```

## å‡ºåŠ›å½¢å¼

### JSONå‡ºåŠ›ã‚¹ã‚­ãƒ¼ãƒ

```json
{
  "document_id": "çŸ³é»’ãƒ¡ãƒ¢.pdf",
  "pages": [
    {
      "page": 1,
      "comments": [
        {
          "id": "C1",
          "bbox_norm": { "x": 0.12, "y": 0.05, "w": 0.30, "h": 0.08 },
          "comment_text": "éšæ®µã¨å¤–å£ã®ã™ãé–“ï¼Ÿç¢ºèªæ¸ˆï¼Ÿ",
          "context_note": "éšæ®µè¸Šã‚Šå ´å´â€¦å¹²æ¸‰ã‚„è€ç«å¡ãå¿˜ã‚Œã®æ‡¸å¿µ",
          "related_elements": ["stair", "outer_wall"],
          "severity": "warning",
          "resolved": false,
          "created_at": "2025-06-27T16:15:00+09:00"
        }
      ]
    }
  ]
}
```

### CSVå‡ºåŠ›å½¢å¼

| Document ID | Page | Comment ID | Comment Text | Context Note | Related Elements | Severity | Resolved | X Position | Y Position | Width | Height | Created At |
|------------|------|------------|--------------|--------------|------------------|----------|----------|------------|------------|-------|--------|------------|
| çŸ³é»’ãƒ¡ãƒ¢.pdf | 1 | C1 | éšæ®µã¨å¤–å£ã®ã™ãé–“ï¼Ÿç¢ºèªæ¸ˆï¼Ÿ | éšæ®µè¸Šã‚Šå ´å´â€¦å¹²æ¸‰ã‚„è€ç«å¡ãå¿˜ã‚Œã®æ‡¸å¿µ | stair; outer_wall | warning | false | 0.120 | 0.050 | 0.300 | 0.080 | 2025-06-27T16:15:00+09:00 |

## é–‹ç™º

### ãƒ“ãƒ«ãƒ‰

```bash
# TypeScriptã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
pnpm build
```

### ãƒ†ã‚¹ãƒˆ

```bash
# ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
pnpm test

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆä»˜ã
pnpm test:cov
```

### ãƒªãƒ³ãƒˆ

```bash
# ãƒªãƒ³ãƒˆãƒã‚§ãƒƒã‚¯
pnpm lint

# è‡ªå‹•ä¿®æ­£
pnpm lint:fix
```

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **è¨€èª**: TypeScript
- **å®Ÿè¡Œç’°å¢ƒ**: Node.js
- **PDFå‡¦ç†**: pdf-img-convert
- **AIåˆ†æ**: OpenAI GPT-4o
- **CLI**: Commander.js
- **ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º**: cli-table3
- **ãƒ†ã‚¹ãƒˆ**: Vitest

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT