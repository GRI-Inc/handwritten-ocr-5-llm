# Vision Module - 将来の改善項目

このドキュメントは、Vision Moduleの将来的な改善項目を記録します。

## 高優先度

### 1. カスタムプロンプトの問題対応
- **問題**: 特定のプロンプトで「申し訳ありませんが...」という拒否応答が返る
- **現象**: 「建築図面の手書きメモやコメントを詳しく抽出」のような詳細な指示で発生
- **対策案**: 
  - より汎用的なプロンプトの使用
  - プロンプトテンプレートの事前検証
  - ベストプラクティスガイドの作成

## 中優先度

### 2. 実際のテスト結果の例をドキュメントに追加
- **内容**: 成功例と失敗例を含む
- **例**: 建築図面から6つの手書きコメントを抽出した成功例
- **目的**: ユーザーが期待できる結果を理解しやすくする

### 3. エラーハンドリングの改善
- **トークン不足時の自動リトライ機能**
  - 現在: エラーを返すのみ
  - 改善案: 自動的にmaxTokensを増やしてリトライ
- **より詳細なエラーメッセージ**
  - エラーコードの体系化
  - 解決方法の提示

## 低優先度

### 4. パフォーマンス最適化
- **画像前処理**
  - 大きな画像の自動リサイズ
  - 不要な部分のクロッピング
- **キャッシング**
  - 同じ画像の再分析を避ける

### 5. 追加機能
- **バッチ処理の最適化**
  - 並列処理の自動調整
  - プログレス表示
- **複数モデルのサポート**
  - o3以外のモデルへの対応準備

## 技術的検討事項

### API使用量の最適化
- 推論トークンの使用量を事前に推定
- コスト見積もり機能の追加

### 型安全性の向上
- より厳密な型定義
- ランタイム型チェックの追加

---
最終更新: 2025-07-01